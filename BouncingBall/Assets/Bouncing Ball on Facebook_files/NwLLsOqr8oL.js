/*1352691827,178142561*/

if (self.CavalryLogger) { CavalryLogger.start_js(["4n8cf"]); }

__d("AdblockDetector",[],function(a,b,c,d,e,f){var g='data-adblock-hash',h={},i=0;function j(k,l){if(k.hasAttribute(g)&&h[k.getAttribute(g)])window.clearTimeout(h[k.getAttribute(g)]);var m=++i;k.setAttribute(g,m);h[m]=setTimeout(function(){h[m]=null;if(!k.offsetHeight){var n=k,o=document.getElementsByTagName('body')[0];while(n&&n!==o){if(n.style.display==='none'||n.style.height==='0px'||n.style.height===0||n.style.height==='0'||n.childNodes.length===0)return;n=n.parentNode;}if(n===o)l&&l(k);}},3000);}f.assertUnblocked=j;});
__d("AdblockDetectorLogging",["AdblockDetector","EagleEye"],function(a,b,c,d,e,f){var g=b('AdblockDetector'),h=b('EagleEye');function i(j){g.assertUnblocked(j,h.log.bind(h,'ads',{event:'ads_blocked'}));}f.assertUnblocked=i;});
function EmployeePrefs(){this.parent.construct(this);}Class.extend(EmployeePrefs,'NubController');copyProperties(EmployeePrefs.prototype,{init:function(a,b){this.parent.init(a);this.menu=b;Dock.registerNubController(a,this);Event.listen(a,'keydown',function(event){var c=Event.getKeyCode(event)||event.which;switch(c){case Keys.UP:case Keys.DOWN:var d=Parent.byClass(event.getTarget(),'fbNubButton');if(d){this.show();var e=Menu.getItems(b);Menu.focusItem(e[c===Keys.UP?e.length-1:0]);return false;}break;case Keys.ESC:this.hide();!function(){DOM.find(a,'a.fbNubButton').focus();}.defer();break;}}.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.buttonContentChanged();},onShow:function(){Menu.register(this.menu);},onHide:function(){Menu.unregister(this.menu);},getSamePageURLOnNewTier:function(a,b){if(b==='sandbox'){var c=a.getUnqualifiedURI().toString().substr(1);return URI(a.getProtocol()+'://bunnylol.facebook.com/?sandbox'+(c===''?'':'+'+encodeURIComponent(c)));}else{var d='www'+(b?('.'+b):'')+'.facebook.com';return URI().setProtocol(a.getProtocol()).setDomain(d).setSubdomain(a.getSubdomain()).setPath(a.getPath()).setQueryData(a.getQueryData()).setFragment(a.getFragment());}},goToTier:function(a){top.location.href=this.getSamePageURLOnNewTier(URI.getRequestURI(),a);return false;}});